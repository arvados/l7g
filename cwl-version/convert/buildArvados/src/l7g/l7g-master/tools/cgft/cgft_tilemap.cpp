#include "cgft.hpp"

char DEFAULT_TILEMAP[] = \
    "0:0\n0:1\n1:0\n1:1\n0:2\n2:0\n0;0:1+2\n1+2:0;0\n0+2:0+2\n0:3\n3:0\n1;0:0+2\n0+2:1;0\n0:4\n4:0\n1+2:1+2\n" \
    "2:2\n1:3\n3:1\n1:2\n2:1\n0:5\n5:0\n0:6\n6:0\n0;0:2+2\n2+2:0;0\n0;0:3+2\n3+2:0;0\n3:3\n0:7\n7:0\n" \
    "1:4\n4:1\n0:8\n8:0\n0+2:1+2\n1+2:0+2\n0:9\n9:0\n1:5\n5:1\n0;0:4+2\n4+2:0;0\n0:a\na:0\n4:4\n1;0:3+2\n" \
    "3+2:1;0\n0;0:5+2\n5+2:0;0\n0:b\nb:0\n0;1:1+2\n1+2:0;1\n2+2:2+2\n1:6\n6:1\n1;0:2+2\n2+2:1;0\n0:c\nc:0\n2:3\n3:2\n" \
    "0+3:0+3\n0;0;0:1+3\n1+3:0;0;0\n0;0:6+2\n6+2:0;0\n0:d\nd:0\n2;0:0+2\n0+2:2;0\n2:4\n4:2\n5:5\n0+2:2+2\n2+2:0+2\n0:e\ne:0\n" \
    "1:7\n7:1\n0+2:3+2\n3+2:0+2\n0:f\nf:0\n0:10\n10:0\n2;0:1+2\n1+2:2;0\n0;0:7+2\n7+2:0;0\n3:4\n4:3\n3+2:3+2\n1;0:4+2\n" \
    "4+2:1;0\n1:8\n8:1\n1+2:2+2\n2+2:1+2\n0:11\n11:0\n1+2:3+2\n3+2:1+2\n0;1:2+2\n2+2:0;1\n1+3:1+3\n0:12\n12:0\n0;0:8+2\n8+2:0;0\n" \
    "0:13\n13:0\n3;0:0+2\n0+2:3;0\n1:9\n9:1\n6:6\n0;1:3+2\n3+2:0;1\n2:5\n5:2\n0:14\n14:0\n1;1:0+2\n0+2:1;1\n3:5\n" \
    "5:3\n0:15\n15:0\n0;0:9+2\n9+2:0;0\n1;0;0:0+3\n0+3:1;0;0\n0:16\n16:0\n1:a\na:1\n2:6\n6:2\n1;0:5+2\n5+2:1;0\n0:17\n" \
    "17:0\n3;0:1+2\n1+2:3;0\n0;0:a+2\na+2:0;0\n0:18\n18:0\n0+2:4+2\n4+2:0+2\n1:b\nb:1\n1;0:6+2\n6+2:1;0\n0;0;0:3+3\n3+3:0;0;0\n0:19\n" \
    "19:0\n7:7\n2:7\n7:2\n0;0:b+2\nb+2:0;0\n0:1a\n1a:0\n4+2:4+2\n0;0;0:2+3\n2+3:0;0;0\n0:1b\n1b:0\n1:c\nc:1\n4:5\n" \
    "5:4\n0:1c\n1c:0\n0+2:5+2\n5+2:0+2\n5:6\n6:5\n3:6\n6:3\n2;1:0+2\n0+2:2;1\n0;0+2:1+3\n1+3:0;0+2\n0:1d\n1d:0\n0;0:c+2\n" \
    "c+2:0;0\n0:1e\n1e:0\n2:8\n8:2\n1:d\nd:1\n8:8\n0:1f\n1f:0\n4:6\n6:4\n1:e\ne:1\n0;1:4+2\n4+2:0;1\n" \
    "0:20\n20:0\n0+2:6+2\n6+2:0+2\n0:21\n21:0\n1;1:2+2\n2+2:1;1\n2:9\n9:2\n1+2:4+2\n4+2:1+2\n5:7\n7:5\n0;0:d+2\nd+2:0;0\n" \
    "1;0:7+2\n7+2:1;0\n1;1:3+2\n3+2:1;1\n3:7\n7:3\n0;1:5+2\n5+2:0;1\n0:22\n22:0\n0:23\n23:0\n1:f\nf:1\n0+2;0:1+3\n1+3:0+2;0\n" \
    "5+2:5+2\n0;0:e+2\ne+2:0;0\n6:7\n7:6\n0:24\n24:0\n9:9\n2;0:3+2\n3+2:2;0\n0:25\n25:0\n1:10\n10:1\n1+2:5+2\n5+2:1+2\n" \
    "2+2:3+2\n3+2:2+2\n2;0:4+2\n4+2:2;0\n1;0:8+2\n8+2:1;0\n0:26\n26:0\n0:27\n27:0\n0;0:f+2\nf+2:0;0\n0:28\n28:0\n2:a\na:2\n" \
    "0;0;0:4+3\n4+3:0;0;0\n3:8\n8:3\n0:29\n29:0\n4:7\n7:4\n4;0:0+2\n0+2:4;0\n0;2:1+2\n1+2:0;2\n0;0:10+2\n10+2:0;0\n0;1:6+2\n6+2:0;1\n" \
    "1:11\n11:1\n1:12\n12:1\n0:2a\n2a:0\n0;1;0:1+3\n1+3:0;1;0\n0:2c\n2c:0\na:a\n0:2b\n2b:0\n0;0:11+2\n11+2:0;0\n0:2d\n" \
    "2d:0\n1:13\n13:1\n2+3:2+3\n2:b\nb:2\n0+2:7+2\n7+2:0+2\n0;0:12+2\n12+2:0;0\n3:9\n9:3\n3+2:4+2\n4+2:3+2\n0:2e\n2e:0\n" \
    "1;0:9+2\n9+2:1;0\n0:2f\n2f:0\n0;0;0;0:1+4\n1+4:0;0;0;0\n3;0:4+2\n4+2:3;0\n1;0+2:0+3\n0+3:1;0+2\n0+2:8+2\n8+2:0+2\n1;1:4+2\n4+2:1;1\n2;1:1+2\n1+2:2;1\n" \
    "1+2:6+2\n6+2:1+2\n2+2:4+2\n4+2:2+2\n1:14\n14:1\n0:30\n30:0\n0:32\n32:0\n1+2:7+2\n7+2:1+2\n0:31\n31:0\n0;1+2:1+3\n1+3:0;1+2\n" \
    "7:8\n8:7\n2;0:5+2\n5+2:2;0\n0;0:13+2\n13+2:0;0\n0;0;0:6+3\n6+3:0;0;0\n3:a\na:3\n0+4:0+4\n4:8\n8:4\n3+2:5+2\n5+2:3+2\n2:c\n" \
    "c:2\n1:15\n15:1\n0+2:9+2\n9+2:0+2\n5;0:0+2\n0+2:5;0\n1:17\n17:1\n1;0:a+2\na+2:1;0\n1:16\n16:1\n6+2:6+2\n0:33\n33:0\n" \
    "0:34\n34:0\n0;1:7+2\n7+2:0;1\n0;0:14+2\n14+2:0;0\n0:35\n35:0\nb:b\n1+2;0:0+3\n0+3:1+2;0\n0:36\n36:0\n3;0:2+2\n2+2:3;0\n2:d\n" \
    "d:2\n1;0;0:3+3\n3+3:1;0;0\n0;0;0:5+3\n5+3:0;0;0\n0:38\n38:0\n5:8\n8:5\n0;2:2+2\n2+2:0;2\n6:8\n8:6\n0;0:15+2\n15+2:0;0\n0:37\n" \
    "37:0\n1:18\n18:1\n2;0:6+2\n6+2:2;0\n1;0:b+2\nb+2:1;0\n1;0;0:2+3\n2+3:1;0;0\n3;0:5+2\n5+2:3;0\n0;2:3+2\n3+2:0;2\n0:39\n39:0\n2:e\n" \
    "e:2\n0+2:a+2\na+2:0+2\n0:3a\n3a:0\n2+2:5+2\n5+2:2+2\n0;0:16+2\n16+2:0;0\n0+3:1+3\n1+3:0+3\n1:1a\n1a:1\n1;1:5+2\n5+2:1;1\n0:3c\n" \
    "3c:0\n0;1:8+2\n8+2:0;1\n1:19\n19:1\n3+3:3+3\n0:3d\n3d:0\n0;0:17+2\n17+2:0;0\n5:9\n9:5\n3:b\nb:3\nc:c\n0:3f\n" \
    "3f:0\n7+2:7+2\n0:3b\n3b:0\n1+2:9+2\n9+2:1+2\n4;0:1+2\n1+2:4;0\n4:9\n9:4\n4:a\na:4\n0:3e\n3e:0\n0;3:3+2\n3+2:0;3\n" \
    "0+2:b+2\nb+2:0+2\n0+2;0:2+3\n2+3:0+2;0\n0:40\n40:0\n3:c\nc:3\n2:f\nf:2\n0;0;0:7+3\n7+3:0;0;0\n1:1b\n1b:1\n0;3:1+2\n1+2:0;3\n" \
    "0:41\n41:0\n2+2:6+2\n6+2:2+2\n5;0:1+2\n1+2:5;0\n1+2:8+2\n8+2:1+2\n2;1:4+2\n4+2:2;1\n8:9\n9:8\n1:1c\n1c:1\n1:1d\n1d:1\n" \
    "0:42\n42:0\n1+4:1+4\n2:10\n10:2\n0+2;0:3+3\n3+3:0+2;0\n3:d\nd:3\n0;1;0:2+3\n2+3:0;1;0\n0;0:18+2\n18+2:0;0\n0:43\n43:0\n6:9\n" \
    "9:6\n0;0:19+2\n19+2:0;0\n0;1;0:3+3\n3+3:0;1;0\n1+2;0:2+3\n2+3:1+2;0\n0+2:c+2\nc+2:0+2\nd:d\n1;1:6+2\n6+2:1;1\n1;0:c+2\nc+2:1;0\n1:1f\n1f:1\n" \
    "1:1e\n1e:1\n0;0:1a+2\n1a+2:0;0\n7:9\n9:7\n0:44\n44:0\n5+2:6+2\n6+2:5+2\n2;0;0:0+3\n0+3:2;0;0\n4;0:3+2\n3+2:4;0\n0:45\n45:0\n" \
    "1;0:d+2\nd+2:1;0\n0:47\n47:0\n0:46\n46:0\n2;1:3+2\n3+2:2;1\n0;3:4+2\n4+2:0;3\n0;0+2:2+3\n2+3:0;0+2\n4+2:5+2\n5+2:4+2\n3;1:0+2\n0+2:3;1\n" \
    "2;0:7+2\n7+2:2;0\n6;0:0+2\n0+2:6;0\n0;0+2:3+3\n3+3:0;0+2\n5:a\na:5\n0;1:9+2\n9+2:0;1\n2;0:8+2\n8+2:2;0\n8:a\na:8\n0:49\n49:0\n" \
    "0+2:d+2\nd+2:0+2\n1+2;0:3+3\n3+3:1+2;0\n0:4a\n4a:0\n0:48\n48:0\n2:12\n12:2\n0;0:1b+2\n1b+2:0;0\n4:b\nb:4\n5+2:7+2\n7+2:5+2\n" \
    "e:e\n1:21\n21:1\n9:a\na:9\n3:e\ne:3\n2:11\n11:2\n3;1:1+2\n1+2:3;1\n0;0:1c+2\n1c+2:0;0\n1;0:e+2\ne+2:1;0\n1:20\n" \
    "20:1\n0;2:4+2\n4+2:0;2\n7:a\na:7\n4+2:6+2\n6+2:4+2\n4;0:6+2\n6+2:4;0\n0;3:2+2\n2+2:0;3\n0:4b\n4b:0\n2:13\n13:2\n0:4e\n" \
    "4e:0\n4;0:5+2\n5+2:4;0\n1:22\n22:1\n0:4c\n4c:0\n8+2:8+2\n1:23\n23:1\n3;0:6+2\n6+2:3;0\n6:a\na:6\n2+2:8+2\n8+2:2+2\n" \
    "0;0;1:1+3\n1+3:0;0;1\n0:4d\n4d:0\n0;0:1d+2\n1d+2:0;0\n0;0;0:8+3\n8+3:0;0;0\n0;1:a+2\na+2:0;1\n1+3:2+3\n2+3:1+3\n0:4f\n4f:0\n1:24\n24:1\n" \
    "1;0:f+2\nf+2:1;0\n0:55\n55:0\n4:c\nc:4\n0:50\n50:0\n0:51\n51:0\n0;2:5+2\n5+2:0;2\n0;0:1e+2\n1e+2:0;0\n3+2:6+2\n6+2:3+2\n" \
    "0:52\n52:0\nf:f\n3+2:7+2\n7+2:3+2\n0+2:e+2\ne+2:0+2\n1;0;0:4+3\n4+3:1;0;0\n3:f\nf:3\n6+2:7+2\n7+2:6+2\n1+2:a+2\na+2:1+2\n5;0:6+2\n" \
    "6+2:5;0\n0:53\n53:0\n0+3:2+3\n2+3:0+3\n5;0:7+2\n7+2:5;0\n0:58\n58:0\n0;0:1f+2\n1f+2:0;0\n3:10\n10:3\n1:27\n27:1\n1:25\n" \
    "25:1\nb:a\na:b\n0+2:f+2\nf+2:0+2\n7;0:0+2\n0+2:7;0\n2+2:7+2\n7+2:2+2\n1;1:7+2\n7+2:1;1\n0:57\n57:0\n3:11\n11:3\n2:15\n" \
    "15:2\n1+2:b+2\nb+2:1+2\n0;3:5+2\n5+2:0;3\n0;0:20+2\n20+2:0;0\n5:c\nc:5\n1:26\n26:1\n9:b\nb:9\n4;0:2+2\n2+2:4;0\n0:54\n" \
    "54:0\n1:2a\n2a:1\n1;0:10+2\n10+2:1;0\n6;0:1+2\n1+2:6;0\n0;0;0:9+3\n9+3:0;0;0\n2:14\n14:2\n0:56\n56:0\n0;0:21+2\n21+2:0;0\n0:59\n" \
    "59:0\n7:b\nb:7\n0+2:10+2\n10+2:0+2\n1;2:0+2\n0+2:1;2\n5:b\nb:5\n2:16\n16:2\n10:10\n0:5a\n5a:0\n0;1:b+2\nb+2:0;1\n" \
    "2+2:9+2\n9+2:2+2\n1+2:c+2\nc+2:1+2\n1;0:11+2\n11+2:1;0\n2+2;0:1+3\n1+3:2+2;0\n2;0:a+2\na+2:2;0\n2;0;0:1+3\n1+3:2;0;0\n1:28\n28:1\n0;0:23+2\n23+2:0;0\n" \
    "1;0;0;0:0+4\n0+4:1;0;0;0\n0:5e\n5e:0\n2;0:9+2\n9+2:2;0\n5;0:2+2\n2+2:5;0\n1:29\n29:1\n0+2;0:4+3\n4+3:0+2;0\n5:d\nd:5\n4:e\ne:4\n" \
    "0;1;0:5+3\n5+3:0;1;0\n0;0:22+2\n22+2:0;0\n4:d\nd:4\n2:17\n17:2\n1;0;0:5+3\n5+3:1;0;0\n9+2:9+2\n5:e\ne:5\n1:2c\n2c:1\n0+2:11+2\n" \
    "11+2:0+2\n8:b\nb:8\n0:5d\n5d:0\nb:c\nc:b\n0:5f\n5f:0\n3;0:7+2\n7+2:3;0\n0:61\n61:0\n0:5c\n5c:0\n0:5b\n" \
    "5b:0\n1:2b\n2b:1\n0+3:3+3\n3+3:0+3\n2:18\n18:2\n1;1:8+2\n8+2:1;1\n4+3:4+3\n2:19\n19:2\n0:60\n60:0\n0;2:6+2\n6+2:0;2\n" \
    "0;1+2:2+3\n2+3:0;1+2\n0;1;0:4+3\n4+3:0;1;0\n0;0:25+2\n25+2:0;0\n4;1:0+2\n0+2:4;1\n1:2e\n2e:1\n0:64\n64:0\n0+2:12+2\n12+2:0+2\n0;1:c+2\nc+2:0;1\n" \
    "0;0:24+2\n24+2:0;0\n0:63\n63:0\n0:62\n62:0\n0;0;0;0:2+4\n2+4:0;0;0;0\n3:12\n12:3\n6:c\nc:6\n6:b\nb:6\n0;4:1+2\n1+2:0;4\n" \
    "1;0:13+2\n13+2:1;0\n0;1:d+2\nd+2:0;1\na:c\nc:a\n0:66\n66:0\n1+3:3+3\n3+3:1+3\n5;0:3+2\n3+2:5;0\n1;2:2+2\n2+2:1;2\n0+2:13+2\n13+2:0+2\n" \
    "1:2f\n2f:1\n0;0;0:a+3\na+3:0;0;0\n5;0:4+2\n4+2:5;0\n1:2d\n2d:1\n1+2;0:5+3\n5+3:1+2;0\n0:68\n68:0\n0;0:28+2\n28+2:0;0\n0;0:27+2\n27+2:0;0\n" \
    "0:6a\n6a:0\n4;0:7+2\n7+2:4;0\n0:69\n69:0\n11:11\n4:f\nf:4\n3:15\n15:3\n0;1+2:3+3\n3+3:0;1+2\n4+2:7+2\n7+2:4+2\n3;0:9+2\n" \
    "9+2:3;0\n0:67\n67:0\n1+2:e+2\ne+2:1+2\n0:6c\n6c:0\n0:6b\n6b:0\n1+2:d+2\nd+2:1+2\n1;0:12+2\n12+2:1;0\n12:12\n0:65\n65:0\n" \
    "0+2:14+2\n14+2:0+2\n1;0;0:7+3\n7+3:1;0;0\n3;0;0:0+3\n0+3:3;0;0\n1;2:3+2\n3+2:1;2\n2;0:b+2\nb+2:2;0\n0;0+2:4+3\n4+3:0;0+2\n3:13\n13:3\n2:1a\n1a:2\n" \
    "0;0:2c+2\n2c+2:0;0\n0:70\n70:0\n3:14\n14:3\n2+2:b+2\nb+2:2+2\n2:1b\n1b:2\n0:6d\n6d:0\n0;3:6+2\n6+2:0;3\n0;0:26+2\n26+2:0;0\n" \
    "1;0:14+2\n14+2:1;0\n4:12\n12:4\n0:6f\n6f:0\n1:30\n30:1\nc:d\nd:c\n3;2:0+2\n0+2:3;2\n2:1c\n1c:2\n0;0;0:c+3\nc+3:0;0;0\n" \
    "3;1:2+2\n2+2:3;1\n0;0;0;0:3+4\n3+4:0;0;0;0\n7:c\nc:7\n2+2:a+2\na+2:2+2\n4;1:1+2\n1+2:4;1\n13:13\n0:75\n75:0\n0:71\n71:0\n3+2:8+2" ;


const char *read_tilemap_from_file(std::string &tilemap_str, const char *fn) {
  int i;
  FILE *fp;
  char buf[1024];
  size_t s, orig;

  if ((fp=fopen(fn, "r"))==NULL) { return NULL; }

  tilemap_str.clear();

  while (!feof(fp)) {
    s = fread(buf, sizeof(char), 1024, fp);
    if (s==0) { continue; }

    orig = tilemap_str.size();
    tilemap_str.reserve( orig + s );
    for (i=0; i<s; i++) { tilemap_str += buf[i]; }
  }

  fclose(fp);

  return tilemap_str.c_str();
}


